{% extends "_layout.html" %}

{% block head %}
<link rel="stylesheet" href="templates/vendor/bootstrap-toggle/css/bootstrap-toggle.min.css">
<link rel="stylesheet" href="templates/vendor/owl-carousel/css/owl.carousel.min.css">
<link rel="stylesheet" href="templates/vendor/owl-carousel/css/owl.theme.default.min.css">
<link href="templates/vendor/jqvmap/css/jqvmap.min.css" rel="stylesheet">
<!-- Datatable -->
<link href="templates/vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet">
<style>
    thead {
        background: gainsboro;
    }

    tbody {
        color: black;
    }

        tbody > tr > td > div.dataTables_wrapper {
            background: #f9fafd;
        }
    div.card-body > div{
        color:black;
    }
    .toggle.btn-xs {
        max-height: 25px;
    }
</style>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-6">
        <div class="card" style="min-height: 244px;">
            <div class="card-header">
                <h4 class="card-title">Service Informations</h4>
            </div>
            <div class="card-body">
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-4">
                        <div>Startup Timestamp</div>
                    </div>
                    <div class="col-8">
                        <div id="info_start_ts" style="color:black;"></div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-4">
                        <div>Startup Duration</div>
                    </div>
                    <div class="col-8">
                        <div id="info_duration" style="color:black;"></div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-4">
                        <div>Service Status</div>
                    </div>
                    <div class="col-4">
                        <div id="info_start" style="color:black;"></div>
                    </div>
                    <div class="col-4">
                        <div class="float-right"><input id="Service_state" type="checkbox" checked data-toggle="toggle" data-on="<i class='fa fa-play'></i> Start" data-offstyle="danger" data-off="<i class='fa fa-pause'></i> Stop" data-width="80" data-size="mini"></div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-4">
                        <div>Response Time</div>
                    </div>
                    <div class="col-8">
                        <div id="info_response" style="color:black;"></div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                    <div class="col-4">
                        <div>Time Stamp</div>
                    </div>
                    <div class="col-8">
                        <div id="info_timestamp" style="color:black;"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /# card -->
    </div>

    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Web Services</h4>
                <p class="mb-1">Response Time (seconds)</p>
            </div>
            <div class="card-body">
                <div class="cpu-load-chart">
                    <div id="cpu-load" class="cpu-load"></div>
                </div>
            </div>
        </div>
        <!-- /# card -->
    </div>
</div>
<div class="row">
    <div class="col-lg-4">
        <div class="card">
            <div id="card_WMS_Task" class="card-header">
                <h4 class="card-title">WMS Tasks</h4>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 0px; background: lightgrey; color:black;">Total Tasks: <span id="inf_Task_Total" style="margin-left:10px;">0</span></p>
                <div class="current-progress">
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Ready</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Task_Ready" class="badge badge-primary">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Task_Ready_p" class="progress-bar progress-bar-primary" style="width: 0%" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Operated</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Task_Operated" class="badge badge-warning">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Task_Operated_p" class="progress-bar progress-bar-warning" style="width: 0%" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Completed</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Task_Completed" class="badge badge-success">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Task_Completed_p" class="progress-bar progress-bar-success" style="width: 0%" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">cancelled</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Task_Cancelled" class="badge badge-danger">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Task_Cancelled_p" class="progress-bar progress-bar-danger" style="width: 0%" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="card-body text-center disabled">
                <div class="m-t-10">
                    <h4 class="card-title">Integration Progress</h4>
                    <p class="mt-3">0</p>
                </div>
                <div class="widget-card-circle" id="info-circle-card" style="margin-bottom: 2px;">
                    <i class="ti-control-shuffle pa"></i>
                </div>
                <ul class="widget-line-list m-b-15">
                    <li class="border-right">
                        92% <br><span class="text-success">
                            <i class="ti-hand-point-up"></i> Success
                        </span>
                    </li>
                    <li>
                        8% <br><span class="text-danger">
                            <i class="ti-hand-point-down"></i> Errors
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div id="card_FMS_Robots" class="card-header">
                <h4 class="card-title">FMS Robots</h4>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 0px; background: lightgrey; color:black;">Total Robots: <span id="inf_Robots_Total" style="margin-left:10px;">0</span></p>
                <div class="current-progress">
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Operational</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Robots_Operational" class="badge badge-success">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Robots_Operational_p" class="progress-bar progress-bar-success" style="width: 0%" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Offline</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Robots_Offline" class="badge badge-danger">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Robots_Offline_p" class="progress-bar progress-bar-danger" style="width: 0%" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2 border-top">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">Ready</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Robots_Ready" class="badge badge-primary">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Robots_Ready_p" class="progress-bar progress-bar-primary" style="width: 0%" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="progress-content py-2">
                        <div class="row">
                            <div class="col-4">
                                <div class="progress-text">On Missions</div>
                            </div>
                            <div class="col-2">
                                <span id="inf_Robots_On_Missions" class="badge badge-warning">0</span>
                            </div>
                            <div class="col-6">
                                <div class="current-progressbar">
                                    <div class="progress">
                                        <div id="inf_Robots_On_Missions_p" class="progress-bar progress-bar-warning" style="width: 0%" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">
                                            0%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">WMS Tasks</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="DataTable" class="table table-bordered table-striped compact table-responsive-sm" style="width: 99%;">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Task_Number</th>
                                <th>Cart_Number</th>
                                <th>Location</th>
                                <th>user name</th>
                                <th>Timestamp</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">FMS Robots</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="DataTable2" class="table table-bordered table-striped compact table-responsive-sm" style="width: 99%;">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Robot name</th>
                                <th>connected</th>
                                <th>operational</th>
                                <th>onMission</th>
                                <th>job Id</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!--<div class="row">
<div class="col-lg-4">
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Project</h4>
        </div>
        <div class="card-body">
            <div class="current-progress">
                <div class="progress-content py-2">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="progress-text">Website</div>
                        </div>
                        <div class="col-lg-8">
                            <div class="current-progressbar">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-primary w-40" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">
                                        40%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress-content py-2">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="progress-text">Android</div>
                        </div>
                        <div class="col-lg-8">
                            <div class="current-progressbar">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-primary w-60" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
                                        60%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress-content py-2">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="progress-text">Ios</div>
                        </div>
                        <div class="col-lg-8">
                            <div class="current-progressbar">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-primary w-70" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
                                        70%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress-content py-2">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="progress-text">Mobile</div>
                        </div>
                        <div class="col-lg-8">
                            <div class="current-progressbar">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-primary w-90" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">
                                        90%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-4">
    <div class="card">
        <div class="card-body">
            <div class="testimonial-widget-one p-17">
                <div class="testimonial-widget-one owl-carousel owl-theme">
                    <div class="item">
                        <div class="testimonial-content">
                            <div class="testimonial-text">
                                <i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
                                consectetur adipisicing elit.
                                <i class="fa fa-quote-right"></i>
                            </div>
                            <div class="media">
                                <div class="media-body">
                                    <div class="testimonial-author">TYRION LANNISTER</div>
                                    <div class="testimonial-author-position">
                                        Founder-Ceo. Dell Corp
                                    </div>
                                </div>
                                <img class="testimonial-author-img ml-3" src="./images/avatar/1.png" alt="" />
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="testimonial-content">
                            <div class="testimonial-text">
                                <i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
                                consectetur adipisicing elit.
                                <i class="fa fa-quote-right"></i>
                            </div>
                            <div class="media">
                                <div class="media-body">
                                    <div class="testimonial-author">TYRION LANNISTER</div>
                                    <div class="testimonial-author-position">
                                        Founder-Ceo. Dell Corp
                                    </div>
                                </div>
                                <img class="testimonial-author-img ml-3" src="./images/avatar/1.png" alt="" />
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="testimonial-content">
                            <div class="testimonial-text">
                                <i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
                                consectetur adipisicing elit.
                                <i class="fa fa-quote-right"></i>
                            </div>
                            <div class="media">
                                <div class="media-body">
                                    <div class="testimonial-author">TYRION LANNISTER</div>
                                    <div class="testimonial-author-position">
                                        Founder-Ceo. Dell Corp
                                    </div>
                                </div>
                                <img class="testimonial-author-img ml-3" src="./images/avatar/1.png" alt="" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-4">
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Web Server</h4>
        </div>
        <div class="card-body">
            <div class="cpu-load-chart">
                <div id="cpu-load" class="cpu-load"></div>
            </div>
        </div>
    </div>-->
<!-- /# card -->
<!--</div>
</div>
<div class="row">
    <div class="col-xl-8 col-lg-8 col-md-8">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Sales Overview</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-xl-12 col-lg-8">
                        <div id="morris-bar-chart"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-4 col-md-4">
        <div class="card">
            <div class="card-body text-center">
                <div class="m-t-10">
                    <h4 class="card-title">Customer Feedback</h4>
                    <h2 class="mt-3">385749</h2>
                </div>
                <div class="widget-card-circle mt-5 mb-5" id="info-circle-card">
                    <i class="ti-control-shuffle pa"></i>
                </div>
                <ul class="widget-line-list m-b-15">
                    <li class="border-right">
                        92% <br><span class="text-success">
                            <i class="ti-hand-point-up"></i> Positive
                        </span>
                    </li>
                    <li>
                        8% <br><span class="text-danger">
                            <i class="ti-hand-point-down"></i>Negative
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-6 col-xl-4 col-xxl-6 col-md-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Timeline</h4>
            </div>
            <div class="card-body">
                <div class="widget-timeline">
                    <ul class="timeline">
                        <li>
                            <div class="timeline-badge primary"></div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>10 minutes ago</span>
                                <h6 class="m-t-5">Youtube, a video-sharing website, goes live.</h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge warning">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>20 minutes ago</span>
                                <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge danger">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>30 minutes ago</span>
                                <h6 class="m-t-5">Google acquires Youtube.</h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge success">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>15 minutes ago</span>
                                <h6 class="m-t-5">StumbleUpon is acquired by eBay. </h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge warning">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>20 minutes ago</span>
                                <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge dark">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>20 minutes ago</span>
                                <h6 class="m-t-5">Mashable, a news website and blog, goes live.</h6>
                            </a>
                        </li>

                        <li>
                            <div class="timeline-badge info">
                            </div>
                            <a class="timeline-panel text-muted" href="#">
                                <span>30 minutes ago</span>
                                <h6 class="m-t-5">Google acquires Youtube.</h6>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-xxl-6 col-lg-6 col-md-6 col-sm-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Todo</h4>
            </div>
            <div class="card-body px-0">
                <div class="todo-list">
                    <div class="tdl-holder">
                        <div class="tdl-content widget-todo mr-4">
                            <ul id="todo_list">
                                <li>
                                    <label>
                                        <input type="checkbox"><i></i><span>Get up</span><a href='#'
                                                                                            class="ti-trash"></a>
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" checked><i></i><span>Stand up</span><a href='#' class="ti-trash"></a>
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox"><i></i><span>
                                            Don't give up the
                                            fight.
                                        </span><a href='#' class="ti-trash"></a>
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" checked><i></i><span>
                                            Do something
                                            else
                                        </span><a href='#' class="ti-trash"></a>
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" checked><i></i><span>Stand up</span><a href='#' class="ti-trash"></a>
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox"><i></i><span>
                                            Don't give up the
                                            fight.
                                        </span><a href='#' class="ti-trash"></a>
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="px-4">
                            <input type="text" class="tdl-new form-control" placeholder="Write new item and hit 'Enter'...">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-md-12 col-xxl-6 col-xl-4 col-lg-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Product Sold</h4>
                <div class="card-action">
                    <div class="dropdown custom-dropdown">
                        <div data-toggle="dropdown">
                            <i class="ti-more-alt"></i>
                        </div>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="#">Option 1</a>
                            <a class="dropdown-item" href="#">Option 2</a>
                            <a class="dropdown-item" href="#">Option 3</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="chart py-4">
                    <canvas id="sold-product"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-12 col-xxl-6 col-lg-6 col-md-12">
        <div class="row">
            <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                <div class="card">
                    <div class="social-graph-wrapper widget-facebook">
                        <span class="s-icon"><i class="fa fa-facebook"></i></span>
                    </div>
                    <div class="row">
                        <div class="col-6 border-right">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">89</span> k</h4>
                                <p class="m-0">Friends</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">119</span> k</h4>
                                <p class="m-0">Followers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                <div class="card">
                    <div class="social-graph-wrapper widget-linkedin">
                        <span class="s-icon"><i class="fa fa-linkedin"></i></span>
                    </div>
                    <div class="row">
                        <div class="col-6 border-right">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">89</span> k</h4>
                                <p class="m-0">Friends</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">119</span> k</h4>
                                <p class="m-0">Followers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                <div class="card">
                    <div class="social-graph-wrapper widget-googleplus">
                        <span class="s-icon"><i class="fa fa-google-plus"></i></span>
                    </div>
                    <div class="row">
                        <div class="col-6 border-right">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">89</span> k</h4>
                                <p class="m-0">Friends</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">119</span> k</h4>
                                <p class="m-0">Followers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-sm-6 col-xxl-6 col-md-6">
                <div class="card">
                    <div class="social-graph-wrapper widget-twitter">
                        <span class="s-icon"><i class="fa fa-twitter"></i></span>
                    </div>
                    <div class="row">
                        <div class="col-6 border-right">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">89</span> k</h4>
                                <p class="m-0">Friends</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="pt-3 pb-3 pl-0 pr-0 text-center">
                                <h4 class="m-1"><span class="counter">119</span> k</h4>
                                <p class="m-0">Followers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>-->
{% endblock %}

{% block scripts %}
<!-- Vectormap -->
<script src="templates/vendor/raphael/raphael.min.js"></script>
<script src="templates/vendor/morris/morris.min.js"></script>


<script src="templates/vendor/circle-progress/circle-progress.min.js"></script>
<script src="templates/vendor/chart.js/Chart.bundle.min.js"></script>

<script src="templates/vendor/gaugeJS/dist/gauge.min.js"></script>

<!--  flot-chart js -->
<script src="templates/vendor/flot/jquery.flot.js"></script>
<script src="templates/vendor/flot/jquery.flot.resize.js"></script>
<script src="templates/vendor/flot/jquery.flot.threshold.min.js"></script>

<!-- Owl Carousel -->
<script src="templates/vendor/owl-carousel/js/owl.carousel.min.js"></script>

<!-- Counter Up -->
<script src="templates/vendor/jqvmap/js/jquery.vmap.min.js"></script>
<script src="templates/vendor/jqvmap/js/jquery.vmap.usa.js"></script>
<script src="templates/vendor/jquery.counterup/jquery.counterup.min.js"></script>


<!--<script src="templates/js/dashboard/dashboard-1.js"></script>-->

<script src="templates/vendor/bootstrap-toggle/js/bootstrap-toggle.min.js"></script>

<!-- Datatable -->
<script src="templates/vendor/datatables/js/jquery.dataTables.min.js"></script>

<script>
    var dataTable = null, dataTable2 = null
    var wm_allocation_arr = [], wmstask_state = [], fmsrobots_state = []
    var vRobotsWMS_ts = "", vRobotsWMS_ts_old = ""
    var vRobotsFMS_ts = "", vRobotsFMS_ts_old = ""
    $(function () {
        var stateList = {
            "0": '<span class="badge badge-info">Created</span>', "5": '<span class="badge badge-warning">HELD State</span>', "15": '<span class="badge badge-info">In Drop/Between Zones</span>',
            "30": '<span class="badge badge-info">Processing started</span>', "90": '<span class="badge badge-success">Completed</span>', "99": '<span class="badge badge-danger">Cancelled</span>',
            "10": '<span class="badge badge-info">Ready</span>'
        }

        $('#info-circle-card').circleProgress({
            value: 0.70,
            size: 90,
            fill: {
                gradient: ["#a389d5"]
            }
        });

        drow_chart();

        get_wmstask_info();
        get_fmsrobots_info();

        function get_wmstask_info() {
            $.ajax({
                dataType: "json",
                contentType: "application/json",
                url: "/wmallocation",
                success: function (data) {
                    wm_allocation_arr = data.data;
                }
            });

            $.ajax({
                dataType: "json",
                contentType: "application/json",
                url: "/wmstask_state",
                success: function (data) {
                    wmstask_state = data;
                    var vBase = (wmstask_state["Task_Total"] > 0) ? wmstask_state["Task_Total"] : 1;
                    var v_Task_Total = wmstask_state["Task_Total"]; v_Task_Total = (v_Task_Total != undefined) ? v_Task_Total : 0;
                    var v_Task_Ready = wmstask_state["Task_Ready"]; v_Task_Ready = (v_Task_Ready != undefined) ? v_Task_Ready : 0;
                    var v_Task_Operated = wmstask_state["Task_Operated"]; v_Task_Operated = (v_Task_Operated != undefined) ? v_Task_Operated : 0;
                    var v_Task_Completed = wmstask_state["Task_Completed"]; v_Task_Completed = (v_Task_Completed != undefined) ? v_Task_Completed : 0;
                    var v_Task_Cancelled = wmstask_state["Task_Cancelled"]; v_Task_Cancelled = (v_Task_Cancelled != undefined) ? v_Task_Cancelled : 0;
                    $("#inf_Task_Total").text(v_Task_Total);
                    $("#inf_Task_Ready").text(v_Task_Ready);
                    $("#inf_Task_Operated").text(v_Task_Operated);
                    $("#inf_Task_Completed").text(v_Task_Completed);
                    $("#inf_Task_Cancelled").text(v_Task_Cancelled);
                    var inf_Task_Ready_p = parseInt(v_Task_Ready / vBase * 100);
                    var inf_Task_Operated_p = parseInt(v_Task_Operated / vBase * 100);
                    var inf_Task_Completed_p = parseInt(v_Task_Completed / vBase * 100);
                    var inf_Task_Cancelled_p = parseInt(v_Task_Cancelled / vBase * 100);

                    $("#inf_Task_Ready_p")
                        .text(inf_Task_Ready_p + '%')
                        .attr("aria-valuenow", inf_Task_Ready_p)
                        .css("width", inf_Task_Ready_p + '%');
                    $("#inf_Task_Operated_p")
                        .text(inf_Task_Operated_p + '%')
                        .attr("aria-valuenow", inf_Task_Operated_p)
                        .css("width", inf_Task_Operated_p + '%');
                    $("#inf_Task_Completed_p")
                        .text(inf_Task_Completed_p + '%')
                        .attr("aria-valuenow", inf_Task_Completed_p)
                        .css("width", inf_Task_Completed_p + '%');
                    $("#inf_Task_Cancelled_p")
                        .text(inf_Task_Cancelled_p + '%')
                        .attr("aria-valuenow", inf_Task_Cancelled_p)
                        .css("width", inf_Task_Cancelled_p + '%');
                }
            });
        }

        function get_fmsrobots_info() {
            $.ajax({
                dataType: "json",
                contentType: "application/json",
                url: "/fmsrobots_state",
                success: function (data) {
                    fmsrobots_state = data;
                    var vBase = (fmsrobots_state["Robots_Total"] > 0) ? fmsrobots_state["Robots_Total"] : 1;
                    var v_Robots_Total = fmsrobots_state["Robots_Total"]; v_Robots_Total = (v_Robots_Total != undefined) ? v_Robots_Total : 0;
                    var v_Robots_Operational = fmsrobots_state["Robots_Operational"]; v_Robots_Operational = (v_Robots_Operational != undefined) ? v_Robots_Operational : 0;
                    var v_Robots_Offline = fmsrobots_state["Robots_Offline"]; v_Robots_Offline = (v_Robots_Offline != undefined) ? v_Robots_Offline : 0;
                    var v_Robots_Ready = fmsrobots_state["Robots_Ready"]; v_Robots_Ready = (v_Robots_Ready != undefined) ? v_Robots_Ready : 0;
                    var v_Robots_On_Missions = fmsrobots_state["Robots_On_Missions"]; v_Robots_On_Missions = (v_Robots_On_Missions != undefined) ? v_Robots_On_Missions : 0;
                    $("#inf_Robots_Total").text(v_Robots_Total);
                    $("#inf_Robots_Operational").text(v_Robots_Operational);
                    $("#inf_Robots_Offline").text(v_Robots_Offline);
                    $("#inf_Robots_Ready").text(v_Robots_Ready);
                    $("#inf_Robots_On_Missions").text(v_Robots_On_Missions);
                    var inf_Robots_Operational_p = parseInt(v_Robots_Operational / vBase * 100);
                    var inf_Robots_Offline_p = parseInt(v_Robots_Offline / vBase * 100);
                    var inf_Robots_Ready_p = parseInt(v_Robots_Ready / vBase * 100);
                    var inf_Robots_On_Missions_p = parseInt(v_Robots_On_Missions / vBase * 100);

                    $("#inf_Robots_Operational_p")
                        .text(inf_Robots_Operational_p + '%')
                        .attr("aria-valuenow", inf_Robots_Operational_p)
                        .css("width", inf_Robots_Operational_p + '%');
                    $("#inf_Robots_Offline_p")
                        .text(inf_Robots_Offline_p + '%')
                        .attr("aria-valuenow", inf_Robots_Offline_p)
                        .css("width", inf_Robots_Offline_p + '%');
                    $("#inf_Robots_Ready_p")
                        .text(inf_Robots_Ready_p + '%')
                        .attr("aria-valuenow", inf_Robots_Ready_p)
                        .css("width", inf_Robots_Ready_p + '%');
                    $("#inf_Robots_On_Missions_p")
                        .text(inf_Robots_On_Missions_p + '%')
                        .attr("aria-valuenow", inf_Robots_On_Missions_p)
                        .css("width", inf_Robots_On_Missions_p + '%');
                }
            });
        }

        function format(d) {
            var tmp_arr = [], iLength = 0;
            var sSQL = "";

            if (wm_allocation_arr.length) {
                tmp_arr = wm_allocation_arr.filter(x => x.task_id == d.id);
            }

            iLength = tmp_arr.length;
            for (i = 0; i < iLength; i++) {
                picked_ts = null;
                if (tmp_arr[i].picked_ts != null && tmp_arr[i].picked_ts.includes(".")) {
                    picked_ts = tmp_arr[i].picked_ts.split('.')[0];
                }
                sSQL = sSQL + '<tr>' +
                    '<td>' + tmp_arr[i].task_seq_nbr + '</td>' +
                    '<td>' + tmp_arr[i].wave_nbr + '</td>' +
                    '<td>' + tmp_arr[i].pick_locn_str + '</td>' +
                    '<td>' + tmp_arr[i].pick_user + '</td>' +
                    '<td>' + picked_ts + '</td>' +
                    '<td>' + tmp_arr[i].type + '</td>' +
                    '<td>' + tmp_arr[i].mhe_system_id + '</td>' +
                    '<td>' + ((stateList[tmp_arr[i].status_id] !== undefined) ? stateList[tmp_arr[i].status_id] : '<span class="badge badge-warning">unknown State</span>') + '</td>' +
                    '</tr>';
            }

            return '<table id="DataTable_1_' + d.id + '" class="table table-striped table-sm thead-light table-bordered compact">' +
                '<thead>' +
                '<tr>' +
                '<th>#</th>' +
                '<th>wave_nbr</th>' +
                '<th>pick Location</th>' +
                '<th>pick_user</th>' +
                '<th>picked_ts</th>' +
                '<th>pick_type</th>' +
                '<th>mhe_system_id</th>' +
                '<th>status</th>' +
                '</tr>' +
                '</thead>' +
                '<tbody> ' +
                sSQL +
                '</tbody> ' +
                '</table>';
        }

        dataTable = $("#DataTable").DataTable({
            "iDisplayLength": 25,
            "autoWidth": true,
            "bProcessing": true,
            "ajax": {
                "url": "/wmstasks",
                "type": "GET",
                "datatype": "json",
            },
            "order": [[5, "desc"]],
            "columns": [
                {
                    "className": 'details-control',
                    "orderable": false,
                    "data": null,
                    /*"defaultContent": ''*/
                    "render": function () {
                        //return '<div class="round-img"><a href=""><img width="35" src="templates/images/avatar/WMS.png" alt=""></a></div>';
                        return '<div class="round-img" style="cursor: pointer;"><img width="35" src="templates/images/avatar/WMS.png" alt=""></div>';
                    }
                    //

                },
                { "data": "task_nbr" },
                { "data": "cart_nbr" },
                { "data": "location" },
                { "data": "mod_user" },
                {
                    "data": "mod_ts", render: function (data) {
                        return data.split('.')[0];
                    }
                },
                {
                    "data": "status_id", render: function (data) {
                        sState = (stateList[data] !== undefined) ? stateList[data] : '<span class="badge badge-warning">unknown State</span>';
                        return sState;
                    }
                }
            ],
            "dom": "B<'dt-toolbar'<'col-xs-12 col-sm-12'f><'col-sm-12 col-xs-12 hidden-xs'l>" +
                "t>r" +
                "<'dt-toolbar-footer'<'col-sm-12 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-12'p>>",
        });

        // Add event listener for opening and closing details
        $('#DataTable tbody').on('click', 'td.details-control', function () {
            var tr = $(this).closest('tr');
            var row = dataTable.row(tr);

            if (row.child.isShown()) {
                // This row is already open - close it
                row.child.hide();
                tr.removeClass('shown');
            }
            else {
                // Open this row
                row.child(format(row.data())).show();
                $('#DataTable_1_' + row.data().id).DataTable();
                tr.addClass('shown');
            }
        });

        dataTable2 = $("#DataTable2").DataTable({
            "iDisplayLength": 25,
            "autoWidth": true,
            "bProcessing": true,
            "ajax": {
                "url": "/fmsrobots",
                "type": "GET",
                "datatype": "json",
            },
            "order": [[6, "desc"]],
            "columns": [
                {
                    "data": "id", render: function () {
                        return '<div class="round-img"><a href=""><img width="35" src="templates/images/avatar/FMS.png" alt=""></a></div>';
                    }
                },
                { "data": "name" },
                {
                    "data": "connected", render: function (data) {
                        sState = data ? '<span class="badge badge-success">Yes</span>' : '<span class="badge badge-warning">No</span>';
                        return sState;
                    }
                },
                {
                    "data": "operational", render: function (data) {
                        sState = data ? '<span class="badge badge-success">Yes</span>' : '<span class="badge badge-warning">No</span>';
                        return sState;
                    }
                },
                {
                    "data": "onMission", render: function (data) {
                        sState = data ? '<span class="badge badge-success">Yes</span>' : '<span class="badge badge-warning">No</span>';
                        return sState;
                    }
                },
                { "data": "jobId" },
                {
                    "data": "updatedAt", render: function (data) {
                        return data.split('.')[0];
                    }
                }
            ],
            "dom": "B<'dt-toolbar'<'col-xs-12 col-sm-12'f><'col-sm-12 col-xs-12 hidden-xs'l>" +
                "t>r" +
                "<'dt-toolbar-footer'<'col-sm-12 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-12'p>>",
        });

        $("input:checkbox#Service_state").change(function () {
            sUrl = ($(this).is(':checked')) ? '/start_service' : '/stop_service';
            console.log($(this).is(':checked') + ": " + sUrl);
            $.ajax({
                dataType: "json",
                contentType: "application/json",
                //async: false,
                url: sUrl,
                success: function (jdata) {
                }
            });
        });

    });

    function getJsonData() {
        let seconds = 0
        $.ajax({
            dataType: "json",
            url: '/service_state',
            contentType: "application/json",
            async: false,
            success: function (jdata) {
                try {
                    $("div#info_start_ts").text(jdata["start_ts"]);
                    sStart = ''
                    $("input#Service_option2").attr('checked', true);
                    if (jdata["cancle"] === true && jdata["start"] === true) {
                        sStart = '<span class="badge badge-warning">Waiting !!</span>'
                    } else if (jdata["start"] === true) {
                        sStart = '<span class="badge badge-success">Started</span>'
                    } else if (jdata["start"] !== true) {
                        sStart = '<span class="badge badge-danger">Stopped</span>'
                        $("input#Service_option1").attr('checked', true);
                    }
                    $("div#info_start").html(sStart);
                    $("div#info_response").text(jdata["response"]);
                    $("div#info_duration").text(jdata["duration"]);
                    $("div#info_timestamp").text(jdata["timestamp"]);

                    if (jdata["cancle"] === true || jdata["start"] !== true) {
                        seconds = 0;
                    } else {
                        var hms = jdata["response"];
                        var a = hms.split(':');
                        seconds = (+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2]);
                    }

                    vRobotsWMS_ts = jdata["RobotsWMS_ts"];
                    if (vRobotsWMS_ts_old == "") {
                        vRobotsWMS_ts_old = vRobotsWMS_ts;
                    } else if (vRobotsWMS_ts != vRobotsWMS_ts_old) {
                        get_wmstask_info();
                        dataTable.ajax.reload(null, false);
                        vRobotsWMS_ts_old = vRobotsWMS_ts;
                    }

                    vRobotsFMS_ts = jdata["RobotsFMS_ts"];
                    if (vRobotsFMS_ts_old == "") {
                        vRobotsFMS_ts_old = vRobotsFMS_ts;
                    } else if (vRobotsFMS_ts != vRobotsFMS_ts_old) {
                        get_fmsrobots_info();
                        dataTable2.ajax.reload(null, false);
                        vRobotsFMS_ts_old = vRobotsFMS_ts;
                    }

                    let span_Connected = '<span class="badge badge-circle badge-outline-success right" style="padding-left: 6px; padding-right: 6px; margin-top: -5px;" title="Connected"><i class="ti-link"></i></span>';
                    let span_Disconnected = '<span id="inf_Task_Ready" class="badge badge-circle badge-outline-danger right" style="padding-left: 6px; padding-right: 6px; margin-top: -5px;" title="Disconnected"><i class="ti-unlink"></i></span>';

                    $('#card_WMS_Task > span').remove();
                    $('#card_WMS_Task').append(jdata["WMS_Connected"] ? span_Connected : span_Disconnected);

                    $('#card_FMS_Robots > span').remove();
                    $('#card_FMS_Robots').append(jdata["FMS_Connected"] ? span_Connected : span_Disconnected);

                } catch (error) {
                    seconds = 0;
                }
            }
        });
        return seconds;
    }

    function drow_chart() {
        "use strict";

        var data = [],
            totalPoints = 300;

        function getTSData() {

            if (data.length > 0)
                data = data.slice(1);

            while (data.length + 1 < totalPoints) {
                data.push(-1);
            }

            // Do a random walk
            //*
            while (data.length < totalPoints) {
                data.push(getJsonData());
            }

            var res = [];
            for (var i = 0; i < data.length; ++i) {
                res.push([i, data[i]]);
            }
            return res;
        }

        // Set up the control widget

        var updateInterval = 1000;
        $("#updateInterval").val(updateInterval).change(function () {
            var v = $(this).val();
            if (v && !isNaN(+v)) {
                updateInterval = +v;
                if (updateInterval < 1) {
                    updateInterval = 1;
                } else if (updateInterval > 3000) {
                    updateInterval = 3000;
                }
                $(this).val("" + updateInterval);
            }
        });

        var plot = $.plot("#cpu-load", [getTSData()], {
            series: {
                color: "#ff007b",
                threshold: [{
                    below: 0.001,
                    color: "#ff007b"
                }, {
                    below: 2,
                    color: "#007BFF"
                }, {
                    below: 4,
                    color: "#FF8300"
                }],
                shadowSize: 0
            },
            /*
            lines: {
                show: true,
                lineWidth: 1,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.0
                    }, {
                        opacity: 0.2
                    }]
                },
            }, //*/
            yaxis: {
                min: 0,
                //max:6
            },
            xaxis: {
                show: false
            },
            //colors: ["#007BFF", "#ff007b"],
            grid: {
                //color: "transparent",
                hoverable: true,
                borderWidth: 0,
                //backgroundColor: 'transparent'
            },
            tooltip: true,
            tooltipOpts: {
                content: "Y: %y",
                //defaultTheme: false
            }


        });

        function update() {

            plot.setData([getTSData()]);

            // Since the axes don't change, we don't need to call plot.setupGrid()
            plot.setupGrid();
            plot.draw();
            setTimeout(update, updateInterval);
        }

        while (data.length < totalPoints) {
            data.push(0);
        }
        update();


    };
</script>
{% endblock %}
